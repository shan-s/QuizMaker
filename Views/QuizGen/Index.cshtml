@model QuizSettings

@{
    ViewData["Title"] = "Quiz Settings";
}

<h1 class="page-header">Quiz Generation</h1>

<form asp-action="Submit" method="post" enctype="multipart/form-data" class="settings-form">
    <!-- Quiz Name -->
    <div class="form-group">
        <label class="form-label">Quiz Name</label>
        <input asp-for="QuizName" class="form-control" placeholder="Enter the quiz name" />
        <span asp-validation-for="QuizName" class="text-danger"></span>
    </div>

    <!-- Topics Input -->
    <div class="form-group">
        <label class="form-label">Topics for Quiz</label>
        <textarea asp-for="Topics" class="form-control" rows="5" placeholder="Enter each topic on a new line"></textarea>
        <span asp-validation-for="Topics" class="text-danger"></span>
    </div>

    <!-- Number of Questions -->
    <div class="form-group">
        <label class="form-label">Number of Questions</label>
        <input asp-for="NumOfQuestions" type="number" class="small-input form-control" placeholder="10" />
        <span asp-validation-for="NumOfQuestions" class="text-danger"></span>
    </div>

    <!-- File Upload -->
    <div class="form-group">
        <label class="form-label">Upload File</label>
        <input asp-for="UploadFile" type="file" class="form-control" />
        <span asp-validation-for="UploadFile" class="text-danger"></span>
    </div>

    <!-- Progress Bar -->
    <div class="form-group" id="progress-bar-section" style="display:none;">
        <label class="form-label">Progress:</label>
        <div class="progress">
            <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary submit-button">Submit</button>
</form>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Handle form submission and flash message
            $('form').submit(function (e) {
                // Show the flash message
                $('#flash-message').show();

                // Show progress bar
                $('#progress-bar-section').show();
                
                // Simulate progress bar increase (for demonstration)
                var progress = 0;
                var interval = setInterval(function () {
                    progress += 10;
                    $('#progress-bar').css('width', progress + '%').attr('aria-valuenow', progress);
                    if (progress >= 100) {
                        clearInterval(interval);
                    }
                }, 500);

                // Allow the form to submit and process asynchronously
                // Add your async function handling code here
            });
        });
    </script>
}
